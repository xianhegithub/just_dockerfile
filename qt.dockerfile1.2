ARG BASE_CONTAINER=tensorflow/tensorflow:2.1.0-gpu-py3-jupyter
FROM $BASE_CONTAINER

RUN pip install --quiet --upgrade pip
RUN pip install --quiet numpy==1.17.4
RUN pip uninstall -y enum34
RUN pip install --quiet zipline==1.3.0
RUN pip install --quiet jupyterlab==1.2.5

#install python packages
RUN pip install --quiet matplotlib==3.1.2 seaborn==0.10.0 pandas==0.22 quandl==3.4.8 pandas-datareader==0.8.0 statsmodels==0.11.0 pymc3==3.8 nodejs==0.1.0
RUN jupyter labextension install @lckr/jupyterlab_variableinspector

RUN mkdir -p /home/xianhe && chmod 1777 /home/xianhe
ENV HOME /home/xianhe
# Define working directory.
WORKDIR /home/xianhe

CMD ["jupyter","lab","--port=8888","--no-browser","--ip=0.0.0.0","--allow-root"]
